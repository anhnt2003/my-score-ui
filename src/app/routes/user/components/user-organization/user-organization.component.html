<div class="container-user-org">
    <p-table #dt2 [value]="organizationUserData" dataKey="id">
        <ng-template pTemplate="caption">
           <div class="header-action">
            <div class="search">
                <p-iconField iconPosition="left" class="ml-auto">
                    <p-inputIcon>
                        <i class="fa fa-search"></i>
                    </p-inputIcon>
                    <input pInputText 
                           type="text" 
                           #searchTerm
                           (keyup)="searchTermSubject.next(searchTerm.value)"
                           placeholder="Tìm kiếm"/>
                </p-iconField>
            </div>
            <div class="button-add">
                <button icon="pi pi-plus" 
                        pButton 
                        pRipple 
                        (click)="openAddUserDialog()"
                        label="Thêm nhân viên" 
                        class="p-button-success">
                </button>
                <p-dialog header="Thêm nhân viên vào tổ chức" [modal]="true" [(visible)]="visibleAddUserDialog">
                    <span class="text-span">Tìm kiếm bằng username, hoặc email</span>
                    <p-autoComplete [(ngModel)]="selectedUserModel"
                                    placeholder="Tìm kiếm" 
                                    [suggestions]="listUsersFound" 
                                    (completeMethod)="userFilter($event)" 
                                    field="userName">
                        <ng-template let-user pTemplate="item">
                            <div class="box-select">
                                <img [src]="user.avatar" 
                                     style="width: 18px"/>
                                <div class="info">{{ user.email }}</div>
                            </div>
                        </ng-template>
                    </p-autoComplete>
                    <div class="title">
                        <p-floatLabel>
                            <input type="text" pInputText [(ngModel)]="positionTitleModel" />
                            <label for="positionTitle">Chức danh</label>
                        </p-floatLabel>
                    </div>
                    <div class="button-footer">
                        <p-button label="Xác nhận" (click)="handleAddUser()" />
                    </div>
                </p-dialog>
            </div>
           </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Organization</th>
                <th>Title</th>
                <th>Status</th>
                <th style="width: 5rem"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
            <tr>
                <td>{{ data.userName }}</td>
                <td>{{ data.email }}</td>
                <td>{{ data.organizationName }}</td>
                <td>{{ data.positionTitle }}</td>
                <td>{{ data.evaluationStatus }}</td>
                <button 
                    type="button" 
                    pButton 
                    pRipple 
                    icon="pi pi-times">
                </button>
                <button 
                    type="button" 
                    pButton 
                    pRipple 
                    icon="pi-user-edit">
                </button>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">No data found.</td>
            </tr>
        </ng-template>
    </p-table>
    <div class="pagination">
        <span class="mx-1 text-color">Items per page: </span>
        <p-dropdown [options]="pagingOptions.pageSizeOptions" 
                    optionLabel="label" 
                    optionValue="value" 
                    [(ngModel)]="pagingOptions.pageSize" 
                    (ngModelChange)="0" />
        <p-paginator [rows]="pagingOptions.pageSize" 
                     #paginator
                     [totalRecords]="120" 
                     (onPageChange)="paginatorSubject.next()" 
                     [showCurrentPageReport]="true"
                     currentPageReportTemplate="{first} - {last} of {totalRecords}" 
                     [showPageLinks]="false" 
                     [showFirstLastIcon]="false"></p-paginator>
    </div>
</div>